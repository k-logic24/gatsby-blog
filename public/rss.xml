<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[K.Iwata's BLOG]]></title><description><![CDATA[This is K.Iwata BLOG.]]></description><link>https://gatsby-starter-blog-demo.netlify.app</link><generator>GatsbyJS</generator><lastBuildDate>Thu, 10 Dec 2020 08:12:07 GMT</lastBuildDate><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/dammy05/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/dammy05/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/dammy03/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/dammy03/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/dammy04/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/dammy04/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/dammy01/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/dammy01/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/daily-policy/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/daily-policy/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[日記みたいなもの]]></title><description><![CDATA[日記みたいなもの、始めました。 日々の気づきや思い、何か形にしたいと思い、始めました。 これからゆるりとしていければ、と思ってます。 よろしくお願いします！]]></description><link>https://gatsby-starter-blog-demo.netlify.app/dammy02/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/dammy02/</guid><pubDate>Wed, 02 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;日記みたいなもの、始めました。&lt;br&gt;
日々の気づきや思い、何か形にしたいと思い、始めました。&lt;/p&gt;
&lt;p&gt;これからゆるりとしていければ、と思ってます。&lt;/p&gt;
&lt;p&gt;よろしくお願いします！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[put_the_contentsでハマった話]]></title><description><![CDATA[某日、WordPress サイト SEO 対策にて、「サイトマップとは別に読み込ませたいテキストファイルがある。」と依頼がきました。 なんでも、記事が数百あり、それをクロールさせたい。 でも sitemap.xml に出せないから、動的に url…]]></description><link>https://gatsby-starter-blog-demo.netlify.app/put-the-content/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.app/put-the-content/</guid><pubDate>Tue, 01 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;某日、WordPress サイト SEO 対策にて、「サイトマップとは別に読み込ませたいテキストファイルがある。」と依頼がきました。&lt;/p&gt;
&lt;p&gt;なんでも、記事が数百あり、それをクロールさせたい。&lt;br&gt;
でも sitemap.xml に出せないから、動的に url 生成しテキストファイルを生成して、それを読み込ませていきたい、とのこと。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// 以下の様なurlが数百とあった
https://example.com/manual/post?id=....&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;フックさせたのはいいものの。。&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E3%83%95%E3%83%83%E3%82%AF%E3%81%95%E3%81%9B%E3%81%9F%E3%81%AE%E3%81%AF%E3%81%84%E3%81%84%E3%82%82%E3%81%AE%E3%81%AE%E3%80%82%E3%80%82&quot; aria-label=&quot;フックさせたのはいいものの。。 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;フックさせたのはいいものの。。&lt;/h2&gt;
&lt;p&gt;さて、どうしようか、と一呼吸おき、考えたのはフックの利用です。&lt;/p&gt;
&lt;p&gt;WordPress にはフック機能があり、例えば記事をアップした時、更新した時、といったタイミングで任意の関数を実行できる便利な機能です。&lt;/p&gt;
&lt;p&gt;こんな感じで実装してみました。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title md-label&quot;&gt;
          &lt;span&gt;functions.php&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token php language-php&quot;&gt;&lt;span class=&quot;token delimiter important&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;add_action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token single-quoted-string string&quot;&gt;&apos;save_post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token single-quoted-string string&quot;&gt;&apos;save_post_urls&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save_post_urls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$post_ID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token variable&quot;&gt;$post_type&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_post_type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$post_ID&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$post_type&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token double-quoted-string string&quot;&gt;&quot;manual_page&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// foreachやらなんやらしてpost記事を取得&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// ここに整ったurlたちの文字列が入っている&lt;/span&gt;
        &lt;span class=&quot;token variable&quot;&gt;$post_urls&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;file_put_contents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$post_urls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LOCK_EX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;よし、できた！も束の間、見事にできていませんでした。&lt;/p&gt;
&lt;h2 id=&quot;何がまちがっていたのか？&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E4%BD%95%E3%81%8C%E3%81%BE%E3%81%A1%E3%81%8C%E3%81%A3%E3%81%A6%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B%EF%BC%9F&quot; aria-label=&quot;何がまちがっていたのか？ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;何がまちがっていたのか？&lt;/h2&gt;
&lt;h3 id=&quot;そもそもパス、合っているか？&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E3%83%91%E3%82%B9%E3%80%81%E5%90%88%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%EF%BC%9F&quot; aria-label=&quot;そもそもパス、合っているか？ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;そもそもパス、合っているか？&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;$file_path&lt;/code&gt;はサーバールートからのフルパスになります。&lt;br&gt;
サイトのドメインからみていませんか？&lt;/p&gt;
&lt;p&gt;サーバーパスが不明な場合は以下の構文を試したいファイルに記述してみるといいです。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre class=&quot;language-php&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token php language-php&quot;&gt;&lt;span class=&quot;token delimiter important&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;__FILE__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token delimiter important&quot;&gt;?&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;そうしたら、画面にパス情報が出力されます。&lt;/p&gt;
&lt;h3 id=&quot;許可、されてる？&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E8%A8%B1%E5%8F%AF%E3%80%81%E3%81%95%E3%82%8C%E3%81%A6%E3%82%8B%EF%BC%9F&quot; aria-label=&quot;許可、されてる？ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;許可、されてる？&lt;/h3&gt;
&lt;p&gt;これは結構盲点ではないでしょうか。いわゆるパーミッションっていうやつです。&lt;br&gt;
「ファイル書き込み、読み込み、実行をしていーよー」っていう許可です。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;file_put_contents&lt;/code&gt;関数が file があったら上書きしたり、なかったら新しく生成するような関数なんですが、それにもサーバー側の許可が必要です。&lt;/p&gt;
&lt;p&gt;この許可がないと、見事に反映されないので要注意です。&lt;/p&gt;
&lt;h2 id=&quot;結果&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%E7%B5%90%E6%9E%9C&quot; aria-label=&quot;結果 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;結果&lt;/h2&gt;
&lt;p&gt;しっかり生成、書き足し等できる状態に出来上がりました。&lt;/p&gt;
&lt;p&gt;関数は便利ですが、そうしたセキュリティー面であったりも気を配らなければ、とより一層気を引き締める１日でした。&lt;/p&gt;</content:encoded></item></channel></rss>