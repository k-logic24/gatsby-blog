{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/react-key-id/","result":{"data":{"site":{"siteMetadata":{"title":"K.Iwata's BLOG"}},"markdownRemark":{"id":"6f102d40-ae3e-5674-aef8-58ff1b4f8610","excerpt":"Reactを使用していると、ループしてkeyを設定することが多々あります。 ところで、keyには何を指定していますか？index? 簡単ですよね。 ですが、indexを指定すると罠にはまります。 さっそくご覧いただこう https://jsbin.com/wohima/edit?js,output…","html":"<p>Reactを使用していると、ループしてkeyを設定することが多々あります。</p>\n<p>ところで、keyには何を指定していますか？index?<br>\n簡単ですよね。</p>\n<p>ですが、indexを指定すると罠にはまります。</p>\n<h2 id=\"さっそくご覧いただこう\">さっそくご覧いただこう</h2>\n<p><a href=\"https://jsbin.com/wohima/edit?js,output\">https://jsbin.com/wohima/edit?js,output</a></p>\n<p>これはとても良い例です。<br>\nやっていることはTodoリストみたいなもので、Add itemボタンを押すとアイテムが増える、という仕様です。</p>\n<p>実際にやってみて気づくと思います。</p>\n<p><strong>keyにidを指定すると、正確にアイテムが追加されます。が、indexだと前のアイテムのvalue値が上書きされてしまう。</strong></p>\n<p>どうしてこのようなことが起きてしまったのでしょうか。</p>\n<h2 id=\"ドキュメントに答えがある\">ドキュメントに答えがある</h2>\n<blockquote>\n<p><a href=\"https://ja.reactjs.org/docs/lists-and-keys.html\">https://ja.reactjs.org/docs/lists-and-keys.html</a>\nReact公式より</p>\n</blockquote>\n<p>keyには要素の識別をするための情報を与えなければなりません。<br>\nkeyを指定しなければindexになります。</p>\n<blockquote>\n<p>コンポーネントのインスタンスは key に基づいて更新、再利用されます。インデックスが key の場合、要素の移動はインデックスの変更を伴います。結果として、非制御の入力などに対するコンポーネントの状態が混乱し、予期せぬ形で更新されてしまうことがあります。<br>\nReact公式 <a href=\"https://ja.reactjs.org/docs/reconciliation.html\">https://ja.reactjs.org/docs/reconciliation.html</a></p>\n</blockquote>\n<p>つまり、keyにindexでは特定要素として判別するために不十分となります。</p>\n<p>一方、id(被らない任意な文字列or数値)であれば、識別が可能です。</p>\n<h2 id=\"まとめ\">まとめ</h2>\n<p>keyにはなるべく固有識別を与えてください。</p>","frontmatter":{"title":"Reactのkeyにindexを入れたくない理由","date":"2020-12-19","description":null,"hero":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHIrFkUBf/EABkQAAIDAQAAAAAAAAAAAAAAAAECEBESMf/aAAgBAQABBQIddMiLuP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQACAwAAAAAAAAAAAAAAAAEQEQAhMf/aAAgBAQABPyEWDNhcq6Y//9oADAMBAAIAAwAAABDrz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxBHZ//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAgEBPxCIf//EABkQAQEAAwEAAAAAAAAAAAAAAAERABAhMf/aAAgBAQABPxDrErggKr26GNMOBmea/9k=","aspectRatio":1.5,"src":"/static/188c748ce946db15f87eb97d97d17c8b/9842e/react.jpg","srcSet":"/static/188c748ce946db15f87eb97d97d17c8b/07ab6/react.jpg 225w,\n/static/188c748ce946db15f87eb97d97d17c8b/32fd5/react.jpg 450w,\n/static/188c748ce946db15f87eb97d97d17c8b/9842e/react.jpg 900w","srcWebp":"/static/188c748ce946db15f87eb97d97d17c8b/210c1/react.webp","srcSetWebp":"/static/188c748ce946db15f87eb97d97d17c8b/975bf/react.webp 225w,\n/static/188c748ce946db15f87eb97d97d17c8b/b8a88/react.webp 450w,\n/static/188c748ce946db15f87eb97d97d17c8b/210c1/react.webp 900w","sizes":"(max-width: 900px) 100vw, 900px"},"sizes":{"src":"/static/188c748ce946db15f87eb97d97d17c8b/14b42/react.jpg"}}}},"tableOfContents":"<ul>\n<li><a href=\"#%E3%81%95%E3%81%A3%E3%81%9D%E3%81%8F%E3%81%94%E8%A6%A7%E3%81%84%E3%81%9F%E3%81%A0%E3%81%93%E3%81%86\">さっそくご覧いただこう</a></li>\n<li><a href=\"#%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AB%E7%AD%94%E3%81%88%E3%81%8C%E3%81%82%E3%82%8B\">ドキュメントに答えがある</a></li>\n<li><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></li>\n</ul>"}},"pageContext":{"slug":"/react-key-id/","previous":{"fields":{"slug":"/vue3-pagination/"},"frontmatter":{"title":"Vue3.0でページネーションを作成する","tags":["vue"]}},"next":{"fields":{"slug":"/css-text-split/"},"frontmatter":{"title":"cssでテキストカラーを半分ずつわける","tags":["html","css"]}}}},"staticQueryHashes":["253180232","3413841318"]}