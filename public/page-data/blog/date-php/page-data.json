{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/date-php/","result":{"data":{"site":{"siteMetadata":{"title":"K.Iwata's BLOG"}},"markdownRemark":{"id":"584256c2-782c-50a3-90af-b1998ad79003","excerpt":"まず前提で、WordPressは内部的時刻がUTC（世界標準時）です。\nよってこんなことをすると、 になります。 0:00ぴったりに変わるシステムがあったとして、勘違いで9:00に切り替わったなんて冷や汗ものです。 date_i18n関数 を使う。\nWordPress特有の関数です。 I18n…","html":"<p>まず前提で、WordPressは内部的時刻がUTC（世界標準時）です。\nよってこんなことをすると、</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// 9時間ずれが発生</span>\n<span class=\"token function\">var_dump</span><span class=\"token punctuation\">(</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Y/m/d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>になります。</p>\n<p>0:00ぴったりに変わるシステムがあったとして、勘違いで9:00に切り替わったなんて冷や汗ものです。</p>\n<h2 id=\"date_i18n関数\">date_i18n関数</h2>\n<p><code class=\"language-text\">date_i18n()</code>を使う。\nWordPress特有の関数です。</p>\n<blockquote>\n<p>I18n は、internationalization、すなわちアプリケーションを翻訳可能にするプロセスのことをいいます。WordPress では、決まった方法で翻訳されるべき文字列をマークすることを意味します。I と n の間に 18 文字あるため、これを i18n と呼びます。</p>\n</blockquote>\n<p>…? よくわからないけど便利。望んだ時刻が返ってきます。</p>\n<h2 id=\"datetime関数\">DateTime関数</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$now</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTimeZone</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Asia/Tokyo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$now</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 日本時間が返ってくる</span></code></pre></div>\n<p>ちなみにWordPressであればこれでいけます。</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$now</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTime</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DateTimeZone</span><span class=\"token punctuation\">(</span><span class=\"token function\">get_option</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'timezone_string'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>管理画面で設定されたタイムゾーンの文字列を取得できます。</p>\n<h2 id=\"感想\">感想</h2>\n<p><code class=\"language-text\">date_i18n()</code>は便利だけど、WordPress専用関数なので、DateTime関数を使った方法がいいかも。</p>","frontmatter":{"title":"WordPressで時刻ずれてません？","date":"2020-12-26","description":null,"hero":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAYUU3UKxk//EABsQAQEAAQUAAAAAAAAAAAAAAAEDAAIEEBIT/9oACAEBAAEFAq3TNvZNXpnQScjj/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERAiH/2gAIAQMBAT8BeHeER//EABkRAAIDAQAAAAAAAAAAAAAAAAABAhESIf/aAAgBAgEBPwFTVdNM/8QAGxAAAgEFAAAAAAAAAAAAAAAAABEBEBIiMVH/2gAIAQEABj8CxlE3S2aODp//xAAbEAACAwEBAQAAAAAAAAAAAAAAEQEhQTFRcf/aAAgBAQABPyFVHJg+6jtnxM5vYN6WNVB//9oADAMBAAIAAwAAABCj/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAAAASFR/9oACAEDAQE/ELg2h//EABcRAQADAAAAAAAAAAAAAAAAAAABIVH/2gAIAQIBAT8QrzOX/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFRQYHh/9oACAEBAAE/EMsCsY7flmOgoXQ39ildPaRxrBy1NDS1WOtPcuRGjtuf/9k=","aspectRatio":1.5,"src":"/static/fd8db8141dde8beee1818bf4b9354057/9842e/php.jpg","srcSet":"/static/fd8db8141dde8beee1818bf4b9354057/07ab6/php.jpg 225w,\n/static/fd8db8141dde8beee1818bf4b9354057/32fd5/php.jpg 450w,\n/static/fd8db8141dde8beee1818bf4b9354057/9842e/php.jpg 900w","srcWebp":"/static/fd8db8141dde8beee1818bf4b9354057/210c1/php.webp","srcSetWebp":"/static/fd8db8141dde8beee1818bf4b9354057/975bf/php.webp 225w,\n/static/fd8db8141dde8beee1818bf4b9354057/b8a88/php.webp 450w,\n/static/fd8db8141dde8beee1818bf4b9354057/210c1/php.webp 900w","sizes":"(max-width: 900px) 100vw, 900px"},"sizes":{"src":"/static/fd8db8141dde8beee1818bf4b9354057/14b42/php.jpg"}}}},"tableOfContents":"<ul>\n<li><a href=\"#date_i18n%E9%96%A2%E6%95%B0\">date_i18n関数</a></li>\n<li><a href=\"#datetime%E9%96%A2%E6%95%B0\">DateTime関数</a></li>\n<li><a href=\"#%E6%84%9F%E6%83%B3\">感想</a></li>\n</ul>"}},"pageContext":{"slug":"/date-php/","previous":{"fields":{"slug":"/css-text-split/"},"frontmatter":{"title":"cssでテキストカラーを半分ずつわける","tags":["html","css"]}},"next":null}},"staticQueryHashes":["253180232","3413841318"]}